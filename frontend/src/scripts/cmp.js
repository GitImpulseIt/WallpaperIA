!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CookieConsentManager=e():n.CookieConsentManager=e()}(this,()=>(()=>{"use strict";var n={d:(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},e={};n.d(e,{default:()=>c});const t={googleTagManager:{enabled:!0,containerId:"GTM-5NBZ65HX"},texts:{bannerTitle:"Gestion des cookies",bannerDescription:"Nous utilisons des cookies pour améliorer votre expérience.",acceptButton:"Accepter",rejectButton:"Refuser",settingsButton:"Paramètres",modalTitle:"Paramètres des cookies",modalDescription:"Choisissez les catégories de cookies que vous souhaitez autoriser.",saveButton:"Enregistrer",closeButton:"Fermer"},categories:{necessary:{name:"Cookies nécessaires",description:"Ces cookies sont essentiels au fonctionnement du site.",cookies:["cmp_consent"]},analytics:{name:"Cookies analytiques",description:"Ces cookies nous aident à comprendre comment les visiteurs utilisent notre site.",cookies:["_ga","_gid","_gat"],enabled:!1},marketing:{name:"Cookies marketing",description:"Ces cookies sont utilisés pour vous proposer des publicités pertinentes.",cookies:["_fbp","_gcl_au"],enabled:!1}}};class o{static getAllCookies(){const n={},e=document.cookie;return e&&e.split(";").forEach(e=>{const[t,o]=e.trim().split("=");t&&(n[t]=decodeURIComponent(o||""))}),n}static deleteCookie(n){document.cookie=`${n}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;const e=window.location.hostname;document.cookie=`${n}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${e};`;const t=e.split(".");if(t.length>2){const e=t.slice(-2).join(".");document.cookie=`${n}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${e};`}}static enforceConsent(n){const e=this.getAllCookies();Object.keys(e).forEach(e=>{n.includes(e)||e!==this.CONSENT_COOKIE_NAME&&this.deleteCookie(e)})}static saveConsent(n){const e=JSON.stringify(n),t=new Date;t.setDate(t.getDate()+this.CONSENT_DURATION),document.cookie=`${this.CONSENT_COOKIE_NAME}=${encodeURIComponent(e)}; expires=${t.toUTCString()}; path=/; SameSite=Lax`}static getConsent(){const n=this.getAllCookies()[this.CONSENT_COOKIE_NAME];if(!n)return null;try{return JSON.parse(n)}catch(n){return console.error("[CMP] Erreur lors de la lecture du consentement:",n),null}}static hasConsent(){return null!==this.getConsent()}static clearConsent(){this.deleteCookie(this.CONSENT_COOKIE_NAME)}static getAllowedCookies(n,e){const t=[...e.necessary,this.CONSENT_COOKIE_NAME];return n.analytics&&t.push(...e.analytics),n.marketing&&t.push(...e.marketing),t}}o.CONSENT_COOKIE_NAME="cmp_consent",o.CONSENT_DURATION=365;class i{constructor(n){this.isLoaded=!1,this.noscriptElement=null,this.containerId=n}load(){this.isLoaded||(window.dataLayer=window.dataLayer||[],function(n,e,t,o,i){n[o]=n[o]||[],n[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});const s=e.getElementsByTagName(t)[0],a=e.createElement(t);a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+i,a.setAttribute("data-cmp-gtm","true"),s&&s.parentNode&&s.parentNode.insertBefore(a,s)}(window,document,"script","dataLayer",this.containerId),this.injectNoscript(),this.isLoaded=!0)}injectNoscript(){if(this.noscriptElement)return;const n=document.createElement("noscript");n.innerHTML=`<iframe src="https://www.googletagmanager.com/ns.html?id=${this.containerId}"\nheight="0" width="0" style="display:none;visibility:hidden"></iframe>`,n.id="gtm-noscript",document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n),this.noscriptElement=n}unload(){this.isLoaded&&(document.querySelectorAll('script[data-cmp-gtm="true"]').forEach(n=>{n.remove()}),document.querySelectorAll('script[src*="googletagmanager.com/gtm.js"]').forEach(n=>{n.remove()}),this.noscriptElement&&(this.noscriptElement.remove(),this.noscriptElement=null),window.dataLayer&&(window.dataLayer=[]),this.isLoaded=!1)}sendConsentUpdate(n,e){this.isLoaded&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"consent_update",consent:{analytics:n?"granted":"denied",marketing:e?"granted":"denied"}}))}isGTMLoaded(){return this.isLoaded}}class s{constructor(n,e,t,o){this.element=null,this.config=n,this.onAccept=e,this.onReject=t,this.onSettings=o}show(){if(this.element)return this.element.style.display="flex",void requestAnimationFrame(()=>{this.element&&(this.element.classList.add("cmp-banner-visible"),this.adjustBodyPadding())});const n=document.createElement("div");n.id="cmp-banner",n.className="cmp-banner",n.innerHTML=`\n      <div class="cmp-banner-content">\n        <div class="cmp-banner-text">\n          <strong>${this.config.texts.bannerTitle}</strong>\n          <span>${this.config.texts.bannerDescription}</span>\n        </div>\n        <div class="cmp-banner-actions">\n          <button class="cmp-btn cmp-btn-reject" id="cmp-reject">\n            ${this.config.texts.rejectButton}\n          </button>\n          <button class="cmp-btn cmp-btn-settings" id="cmp-settings">\n            ${this.config.texts.settingsButton}\n          </button>\n          <button class="cmp-btn cmp-btn-accept" id="cmp-accept">\n            ${this.config.texts.acceptButton}\n          </button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),this.element=n,this.attachEvents(),requestAnimationFrame(()=>{n.classList.add("cmp-banner-visible"),this.adjustBodyPadding()})}hide(){this.element&&(this.element.classList.remove("cmp-banner-visible"),this.removeBodyPadding(),setTimeout(()=>{this.element&&(this.element.style.display="none")},300))}destroy(){this.element&&(this.removeBodyPadding(),this.element.remove(),this.element=null)}adjustBodyPadding(){this.element&&setTimeout(()=>{if(this.element){const n=this.element.offsetHeight;document.body.style.paddingBottom=`${n}px`}},50)}removeBodyPadding(){document.body.style.paddingBottom=""}attachEvents(){const n=document.getElementById("cmp-accept"),e=document.getElementById("cmp-reject"),t=document.getElementById("cmp-settings");n&&n.addEventListener("click",()=>{this.onAccept()}),e&&e.addEventListener("click",()=>{this.onReject()}),t&&t.addEventListener("click",()=>{this.hide(),this.onSettings()})}}class a{constructor(n,e){this.element=null,this.config=n,this.onSave=e}show(n){if(this.element)return void(this.element.style.display="flex");const e=document.createElement("div");e.id="cmp-modal",e.className="cmp-modal";const t=(null==n?void 0:n.analytics)?"checked":"",o=(null==n?void 0:n.marketing)?"checked":"";e.innerHTML=`\n      <div class="cmp-modal-backdrop"></div>\n      <div class="cmp-modal-content">\n        <div class="cmp-modal-header">\n          <h2>${this.config.texts.modalTitle}</h2>\n          <button class="cmp-modal-close" id="cmp-modal-close" aria-label="Fermer">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <line x1="18" y1="6" x2="6" y2="18"></line>\n              <line x1="6" y1="6" x2="18" y2="18"></line>\n            </svg>\n          </button>\n        </div>\n        <div class="cmp-modal-body">\n          <p class="cmp-modal-description">${this.config.texts.modalDescription}</p>\n\n          <div class="cmp-cookie-category">\n            <div class="cmp-category-header">\n              <label class="cmp-category-label">\n                <input\n                  type="checkbox"\n                  checked\n                  disabled\n                  class="cmp-checkbox"\n                />\n                <span class="cmp-category-name">${this.config.categories.necessary.name}</span>\n              </label>\n              <span class="cmp-category-badge">Toujours actif</span>\n            </div>\n            <p class="cmp-category-description">${this.config.categories.necessary.description}</p>\n            <p class="cmp-category-cookies"><strong>Cookies:</strong> ${this.config.categories.necessary.cookies.join(", ")}</p>\n          </div>\n\n          <div class="cmp-cookie-category">\n            <div class="cmp-category-header">\n              <label class="cmp-category-label">\n                <input\n                  type="checkbox"\n                  id="cmp-analytics-checkbox"\n                  class="cmp-checkbox"\n                  ${t}\n                />\n                <span class="cmp-category-name">${this.config.categories.analytics.name}</span>\n              </label>\n            </div>\n            <p class="cmp-category-description">${this.config.categories.analytics.description}</p>\n            <p class="cmp-category-cookies"><strong>Cookies:</strong> ${this.config.categories.analytics.cookies.join(", ")}</p>\n          </div>\n\n          <div class="cmp-cookie-category">\n            <div class="cmp-category-header">\n              <label class="cmp-category-label">\n                <input\n                  type="checkbox"\n                  id="cmp-marketing-checkbox"\n                  class="cmp-checkbox"\n                  ${o}\n                />\n                <span class="cmp-category-name">${this.config.categories.marketing.name}</span>\n              </label>\n            </div>\n            <p class="cmp-category-description">${this.config.categories.marketing.description}</p>\n            <p class="cmp-category-cookies"><strong>Cookies:</strong> ${this.config.categories.marketing.cookies.join(", ")}</p>\n          </div>\n        </div>\n        <div class="cmp-modal-footer">\n          <button class="cmp-btn cmp-btn-secondary" id="cmp-modal-cancel">\n            ${this.config.texts.closeButton}\n          </button>\n          <button class="cmp-btn cmp-btn-primary" id="cmp-modal-save">\n            ${this.config.texts.saveButton}\n          </button>\n        </div>\n      </div>\n    `,document.body.appendChild(e),this.element=e,this.attachEvents(),document.body.style.overflow="hidden",requestAnimationFrame(()=>{e.classList.add("cmp-modal-visible")})}hide(){this.element&&(this.element.classList.remove("cmp-modal-visible"),document.body.style.overflow="",setTimeout(()=>{this.element&&(this.element.remove(),this.element=null)},300))}destroy(){this.element&&(document.body.style.overflow="",this.element.remove(),this.element=null)}attachEvents(){var n;const e=document.getElementById("cmp-modal-save"),t=document.getElementById("cmp-modal-cancel"),o=document.getElementById("cmp-modal-close"),i=null===(n=this.element)||void 0===n?void 0:n.querySelector(".cmp-modal-backdrop");e&&e.addEventListener("click",()=>{this.handleSave()}),t&&t.addEventListener("click",()=>{this.hide()}),o&&o.addEventListener("click",()=>{this.hide()}),i&&i.addEventListener("click",()=>{this.hide()}),document.addEventListener("keydown",n=>{"Escape"===n.key&&this.element&&this.hide()})}handleSave(){const n=document.getElementById("cmp-analytics-checkbox"),e=document.getElementById("cmp-marketing-checkbox"),t={necessary:!0,analytics:(null==n?void 0:n.checked)||!1,marketing:(null==e?void 0:e.checked)||!1,timestamp:Date.now()};this.onSave(t),this.hide()}}class c{constructor(n){this.gtmManager=null,this.initialized=!1,this.config=this.mergeConfig(t,n),this.config.googleTagManager.enabled&&this.config.googleTagManager.containerId&&(this.gtmManager=new i(this.config.googleTagManager.containerId)),this.banner=new s(this.config,()=>this.handleAcceptAll(),()=>this.handleRejectAll(),()=>this.handleShowSettings()),this.modal=new a(this.config,n=>this.handleSaveConsent(n))}init(){if(this.initialized)return;!function(){if(document.getElementById("cmp-styles"))return;const n=document.createElement("style");n.id="cmp-styles",n.textContent="\n/* === Reset et base === */\n.cmp-banner *,\n.cmp-modal * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n/* === Bandeau de consentement === */\n.cmp-banner {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #ffffff;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  z-index: 9999;\n  transform: translateY(100%);\n  transition: transform 0.3s ease-in-out;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #333;\n}\n\n.cmp-banner-visible {\n  transform: translateY(0);\n}\n\n.cmp-banner-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  gap: 10px;\n}\n\n.cmp-banner-text {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.cmp-banner-text strong {\n  font-weight: 600;\n  font-size: 15px;\n}\n\n.cmp-banner-text span {\n  color: #666;\n  font-size: 13px;\n}\n\n.cmp-banner-actions {\n  display: flex;\n  gap: 10px;\n  flex-shrink: 0;\n}\n\n/* === Boutons === */\n.cmp-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-family: inherit;\n  white-space: nowrap;\n}\n\n.cmp-btn:hover {\n  transform: translateY(-1px);\n}\n\n.cmp-btn:active {\n  transform: translateY(0);\n}\n\n.cmp-btn-accept {\n  background: #10b981;\n  color: white;\n}\n\n.cmp-btn-accept:hover {\n  background: #059669;\n}\n\n.cmp-btn-reject {\n  background: #ef4444;\n  color: white;\n}\n\n.cmp-btn-reject:hover {\n  background: #dc2626;\n}\n\n.cmp-btn-settings {\n  background: #6b7280;\n  color: white;\n}\n\n.cmp-btn-settings:hover {\n  background: #4b5563;\n}\n\n.cmp-btn-primary {\n  background: #3b82f6;\n  color: white;\n}\n\n.cmp-btn-primary:hover {\n  background: #2563eb;\n}\n\n.cmp-btn-secondary {\n  background: #e5e7eb;\n  color: #374151;\n}\n\n.cmp-btn-secondary:hover {\n  background: #d1d5db;\n}\n\n/* === Modale === */\n.cmp-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n}\n\n.cmp-modal-visible {\n  opacity: 1;\n}\n\n.cmp-modal-backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.cmp-modal-content {\n  position: relative;\n  background: white;\n  border-radius: 12px;\n  max-width: 600px;\n  width: 90%;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  transform: scale(0.9);\n  transition: transform 0.3s ease;\n}\n\n.cmp-modal-visible .cmp-modal-content {\n  transform: scale(1);\n}\n\n.cmp-modal-header {\n  padding: 24px;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.cmp-modal-header h2 {\n  font-size: 20px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.cmp-modal-close {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #6b7280;\n  transition: color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.cmp-modal-close:hover {\n  color: #111827;\n}\n\n.cmp-modal-body {\n  padding: 24px;\n  overflow-y: auto;\n  flex: 1;\n}\n\n.cmp-modal-description {\n  color: #6b7280;\n  margin-bottom: 24px;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.cmp-cookie-category {\n  padding: 20px;\n  background: #f9fafb;\n  border-radius: 8px;\n  margin-bottom: 16px;\n}\n\n.cmp-category-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 12px;\n}\n\n.cmp-category-label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  font-size: 15px;\n  font-weight: 500;\n  color: #111827;\n}\n\n.cmp-checkbox {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: #3b82f6;\n}\n\n.cmp-checkbox:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n.cmp-category-badge {\n  background: #10b981;\n  color: white;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.cmp-category-description {\n  color: #6b7280;\n  font-size: 13px;\n  margin-bottom: 8px;\n  line-height: 1.5;\n}\n\n.cmp-category-cookies {\n  color: #9ca3af;\n  font-size: 12px;\n}\n\n.cmp-category-cookies strong {\n  color: #6b7280;\n}\n\n.cmp-modal-footer {\n  padding: 24px;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n}\n\n/* === Responsive === */\n\n/* Tablettes */\n@media (max-width: 768px) {\n  .cmp-banner-content {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 16px;\n  }\n\n  .cmp-banner-actions {\n    width: 100%;\n    justify-content: space-between;\n  }\n\n  .cmp-btn {\n    flex: 1;\n    padding: 12px 16px;\n  }\n\n  .cmp-modal-content {\n    width: 95%;\n    max-height: 90vh;\n  }\n\n  .cmp-modal-header,\n  .cmp-modal-body,\n  .cmp-modal-footer {\n    padding: 20px;\n  }\n}\n\n/* Mobiles */\n@media (max-width: 480px) {\n  .cmp-banner {\n    font-size: 12px;\n  }\n\n  .cmp-banner-content {\n    padding: 10px 12px;\n  }\n\n  .cmp-banner-text {\n    margin-bottom: 6px;\n  }\n\n  .cmp-banner-text strong {\n    font-size: 13px;\n  }\n\n  .cmp-banner-text span {\n    font-size: 11px;\n  }\n\n  .cmp-banner-actions {\n    width: 100%;\n    justify-content: space-between;\n    gap: 6px;\n  }\n\n  .cmp-btn {\n    flex: 1;\n    padding: 8px 10px;\n    font-size: 11px;\n  }\n\n  .cmp-modal-content {\n    width: 100%;\n    height: 100%;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n\n  .cmp-modal-header {\n    padding: 16px;\n  }\n\n  .cmp-modal-header h2 {\n    font-size: 18px;\n  }\n\n  .cmp-modal-body {\n    padding: 16px;\n  }\n\n  .cmp-modal-footer {\n    padding: 16px;\n    flex-direction: column-reverse;\n  }\n\n  .cmp-modal-footer .cmp-btn {\n    width: 100%;\n  }\n\n  .cmp-cookie-category {\n    padding: 16px;\n  }\n}\n\n/* Mode paysage mobile */\n@media (max-height: 500px) and (orientation: landscape) {\n  .cmp-modal-content {\n    max-height: 95vh;\n  }\n\n  .cmp-modal-header,\n  .cmp-modal-body,\n  .cmp-modal-footer {\n    padding: 12px 20px;\n  }\n}\n",document.head.appendChild(n)}(),this.gtmManager&&this.gtmManager.load();const n=o.getConsent();n?this.applyConsent(n):(this.cleanupUnauthorizedCookies([]),this.banner.show()),this.initialized=!0}handleAcceptAll(){const n={necessary:!0,analytics:!0,marketing:!0,timestamp:Date.now()};this.handleSaveConsent(n),this.banner.hide()}handleRejectAll(){const n={necessary:!0,analytics:!1,marketing:!1,timestamp:Date.now()};this.handleSaveConsent(n),this.banner.hide()}handleShowSettings(){const n=o.getConsent();this.modal.show(n||void 0)}handleSaveConsent(n){o.saveConsent(n),this.applyConsent(n)}applyConsent(n){const e=o.getAllowedCookies(n,{necessary:this.config.categories.necessary.cookies,analytics:this.config.categories.analytics.cookies,marketing:this.config.categories.marketing.cookies});this.cleanupUnauthorizedCookies(e),this.gtmManager&&this.gtmManager.isGTMLoaded()&&this.gtmManager.sendConsentUpdate(n.analytics,n.marketing),this.dispatchConsentEvent(n)}cleanupUnauthorizedCookies(n){const e=[...n,"cmp_consent"];o.enforceConsent(e)}dispatchConsentEvent(n){const e=new CustomEvent("cmp:consent",{detail:n});window.dispatchEvent(e)}mergeConfig(n,e){var t,o,i;return e?{googleTagManager:Object.assign(Object.assign({},n.googleTagManager),e.googleTagManager),texts:Object.assign(Object.assign({},n.texts),e.texts),categories:{necessary:Object.assign(Object.assign({},n.categories.necessary),null===(t=e.categories)||void 0===t?void 0:t.necessary),analytics:Object.assign(Object.assign({},n.categories.analytics),null===(o=e.categories)||void 0===o?void 0:o.analytics),marketing:Object.assign(Object.assign({},n.categories.marketing),null===(i=e.categories)||void 0===i?void 0:i.marketing)}}:n}openSettings(){this.handleShowSettings()}resetConsent(){this.gtmManager&&(this.gtmManager.unload(),this.gtmManager.load()),o.clearConsent(),this.cleanupUnauthorizedCookies([]),this.banner.show()}getConsent(){return o.getConsent()}}if("undefined"!=typeof window){window.CookieConsentManager=c;const n=()=>{const n=document.querySelector('script[src*="cmp.js"]');if(n&&n.hasAttribute("data-auto-init")){const n=new c;n.init(),window.cmp=n}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}return e.default})());